package tests

import (
	"math"
	"testing"

	"../../ta"
)

func TestRSICalculation(t *testing.T) {
	tests := []*testItem{
		&testItem{
			Input: []float64{
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
				1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0,
			},
			Expected: []float64{
				math.NaN(), math.NaN(), math.NaN(), math.NaN(), math.NaN(),
				math.NaN(), math.NaN(), math.NaN(), 100, 100,
				44.47829398, 48.08154545, 51.61420793, 55.05467524,
				58.38368966, 61.58470564, 64.64412091, 67.55137559, 70.29892858,
				72.8821279, 38.75463088, 42.14122125, 45.52967749, 48.89661321,
				52.21923207, 55.4759352, 58.64686079, 61.71432874, 64.66317167,
				67.48094356, 37.33651423, 40.65051704, 43.98330966, 47.31187162,
				50.61329893, 53.86542949, 57.04742582, 60.14028339, 63.12723987,
				65.99406944, 36.9257253, 40.21727994, 43.53241004, 46.84826032,
				50.14195564, 53.39122804, 56.57500873, 59.67395228, 62.67086679,
				65.5510322, 36.80152621, 40.08616763, 43.39582014, 46.70768357,
				49.99889684, 53.24716518, 56.43135459, 59.53202059, 62.53184452,
				65.41595906, 36.7634936, 40.04600631, 43.35396865, 46.66459782,
				49.95503754, 53.2029853, 56.38728758, 59.48846996, 62.48917526,
				65.37449126, 36.75180178, 40.03365898, 43.34110054, 46.65134901,
				49.94154964, 53.18939762, 56.37373344, 59.47507351, 62.47604885,
				65.36173346, 36.74820324, 40.02985858, 43.33713973, 46.64727091,
				49.93739784, 53.18521499, 56.36956102, 59.47094953, 62.4720079,
				65.35780589, 36.74709526, 40.02868844, 43.3359202, 46.64601525,
				49.93611948, 53.18392712, 56.36827629, 59.4696797, 62.47076362,
				65.35659651,
			},
			Period: 9,
		},
	}

	test_worker(t, tests, ta.RSI, 8)
}
